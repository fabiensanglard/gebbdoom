\begin{wrapfigure}[14]{r}{0.25\textwidth}{
\centering \scaledimage{0.25}{3do_logo.png}}
\end{wrapfigure}
The 3DO Company was founded in 1991 by ex-Electronic Arts and ex-Apple employee Trip Hawkins. Without the means to actually produce the hardware, the goal was to develop not a machine but a standard. 3DO offered to license the specification of its machine. In exchange for fees a potential manufacturer received the blueprints which considerably cut the R\&D cost. The company's business model was to collect a royalty on each console and each game sold. That was far from being a crazy idea since JVC had pulled it off with its hugely successful VHS Video Cassette system.\\

 Sony briefly considered it for its PSX project. The Japanese company even visited the San Mateo office to see the prototype but they eventually declined. Several other companies did acquire the rights to build a 3DO (Samsung, Toshiba, and AT\&T) but never built anything.\\
 \par
Finally in October 1993, Panasonic, Goldstar, and Sanyo each released their own machines, respectively the Panasonic 3DO GZ-1, Goldstar 3DO, and Sanyo TRY 3DO. Later, Creative released an ISA card you could plug into a PC.\\
\par
\cfullimage{consoles/3DO.png}{Panasonic FZ-1 implementation of 3DO specs}
\par
\vspace{-5pt}
\trivia{The specs of the machine were originally written on the napkin of a restaurant in 1989 by Dave Needle and RJ Mical\footnote{Source: RetroGamer \#122 "Ahead of its time".}.}

















Announced during CES '92, the concept and specs made the 3DO an immediate sensation. It was the first of the fifth generation 32-bit era and there was nothing as powerful on the market.\\
\par


\fq{Under the hood the 3DO used an ARM60 RISC
Processor and had two powerful custom graphics
chips and an animation processor. It also sported 3Mb
RAM and a multitasking OS. Uniquely for a console,
developers wrote games for the OS and not the
hardware, ensuring backwards compatibility. }{RetroGamer \#122}\\

\par
 3DO had bigger plans than just gaming. Thanks to its CD format, it had the ambition to replace the VCR and enable movie streaming via the Internet.\\
\par
But things would end up taking an ugly turn. In February 1993, WIRED magazine ran a full article "3DO: Hip or Hype?" that raised many concerns about the viability of the adventure.\\
\par
One of the problems was the business model. To be profitable, 3DO had to make money on each console and each game sold. This was the opposite of Sega and Nintendo who would sell their machine at a loss and make it up with games. This pushed the MSRP of the 3DO up to \$699 which made it by far the most expensive console on the market\footnote{Except for the Neo-Geo which was the same price and always remained a dream for most gamers.}. By comparison, the PlayStation's launch price was less than half the price at only \$299. Right off the bat, the machine gained itself a "rich kid" reputation\footnote{The price was lowered shortly after release but by then its reputation had been set.}.\\
\par
The other aspect that poisoned the 3DO was its game library. At launch it was rather small with only six games of low quality besides "Crash 'N Burn". Firmware changes and devkit modifications until the last minute had hampered game studios in their efforts to have something ready for launch day.\\
\par
Ironically, 3DO also suffered from its media, the CD-ROM. With a capacity more than 150 times more than what they were used to (650 MiB vs 4MiB), game studios experimented with lengthy pixelated cut-scenes and borderline interactive movies which turned out to be no fun at all.\\
\par
More rushed poor-quality games and the release of the PSX in late 1994 annihilated any hopes of recovery.
By 1995, with less than 700,000 consoles sold\footnote{Source Next Generation magazine, Feb 1995.} the standard had lost momentum. It died soon after along with its creator, the 3DO Company.






\cfullimage{3D0_motherboard.png}{3DO Panasonic model "FZ-10 R.E.A.L" System Board}
\par
Panasonic, Goldstar, and Sanyo all designed their own motherboards but all 3DOs had the same functionality. Opening the most popular model, the "FZ-10", reveals seventeen chips!\\
\par
\bu{Chips}\\
\par
\circled{1} 50 MHz CEL Engine CLIO, 
\circled{2} 50 MHz CEL Engine  Madam, 
\circled{3} 2 MiB RAM, 
\circled{4} 1 MiB VRAM (framebuffer), 
\circled{5} 12.5 MHz ARM60 main CPU, 
\circled{6} Corner engine (50MHz Math co-pro), 
\circled{7} 1 MiB OS ROM, 
\circled{8} Digital Video Encoder (25MHz VDLP), 
\circled{9} 32 KiB Battery backed SRAM,  
\circled{A} ARM CPU 32 KiB SRAM, 
\circled{B} DSP (16-bit, 25MHz), 
\circled{C} CD signal processing LSI, 
\circled{D} CD-ROM Controller MN1882410, 
\circled{E} CD-ROM Firmware, All connected via 50 MiB/s and 36 DMA channels.\\
\par
\bu{Connections}\\
\par
\circled{F} Gamepads,
\circled{G} Expansion port,
\circled{H} Composite/S-Video output ports, 
\circled{I} RF Modulator and its output audio jack. 


\fullimage{3do_motherboard}
\par
Developers for the 3DO were forbidden direct access to the hardware except for hand-crafted assembly for the ARM processor.\\
\par
\fq{We were never given docs on the register set for the 3DO hardware. Using reverse engineering, we were able to get the I/O ports, but we were told by the 3DO Company our games would be rejected if they found we bypassed the OS.}{
Rebecca Heineman}\\
\par
 The M2 project -- which began as an accelerator add-on for the 3DO -- morphed into what could have been the 3DO 2. It was to feature dual PowerPC 602 processors in addition to newer 3D and video rendering technologies. It was never completed.\\
 %\footnote{"3DO Press Release" August 1994.} 
\par
\trivia{Speculating on M2 machines, developers hid cheat codes in their games in order to improve graphics for the 3DO 2. In \doom{}, the sequence "Up, Right, L, Up, Right, Right, R, A, Left" allowed increasing the active window size all the way to full screen.}


\subsection{3DO Programming}
Graphics programming was done via the 3DO's "CEL engine", powered by the chips Clio and Madam, where CEL is a fancy name for "sprite". Each CEL can be drawn in screenspace with three associated vectors HD, VD, and HDD. Together they allow operations such as scaling, rotation, skewing, and even something called "perspective" in the programmer manual. The CEL engine was able to process several CELs simultaneously.\\
\par
If HD and VD obviously set the horizontal/vertical vectors, the differential vector HDD deserves more explanation. Here is how it is described in the manual.\\

\fq{
When fixed HDX and HDY values set the horizontal offset of a cel and VDX and VDY values set the vertical offset of a cel, the result is always a strict parallelogram-all the row edges are parallel as are all the column edges. Although you change the size and angles of the parallelogram, you cannot get any perspective effects with row edges converging or diverging. To add perspective, the projector uses the HDDX and HDDY offset pair.
HDDX and HDDY change HDX and HDY values by a set amount at the beginning of each row edge. When one row edge is calculated, the projector adds HDDX to HDX and adds HDDY to HDY. It then uses the new HDX and HDY values to calculate the next row edge. Because HDDX and HDDY can change the row slope and pixel spacing from row edge to row edge, they can create converging or diverging row edges\footnotemark.}{3DO Programmer Guide}\\
\par
\circled{1} normal, \circled{2} rotation, \circled{3} perspective (incorrect), \circled{4} skewing with upscaling. \\
\par
\footnotetext{This is the same mechanism used for sprite distortion used in the Atari Lynx -- and it should be, since RJ Mical and Dave Needle designed the Lynx too.}
% \trivia{Despite its name, the "perspective" is not correct.}
\begin{figure}[H] \centering
\scaledimage{0.8}{3do_vectors.png}
\end{figure}

\scaledimage{0.90}{CEL_examples.png}


\subsection{\doom{} on 3DO}
Given the specs of the machine, the 3DO had the potential to be the best console host for \doom. The Jaguar version had been positively received, so it would have been logical that with more RAM and superior graphic hardware, the result would make both gamers and publishers happy. Alas, in a crazy turn of events, what was released was a massacre of the original, universally accepted as the worst console version.\\  
\par
% How could they screw this up? Easily in fact, just give a lone developer ten weeks to do it and ship it.\\
% \par
In January 1995, for \$250,000 (some articles even mentioned \$500,000) and an obligation to release before Christmas 1995, Art Data Interactive had landed the rights to \doom~on 3DO. To the people at the company it felt like "a license to print money". Many features were promised to the press, among them new weapons, new monsters, new maps, and Full Motion Video (FMV) sequences with real actors to build up the story.\\
\par
\cfullimage{doom_3do_fmv.png}{The FMV shooting set (photo released by Rebecca Heineman)}
\par


The project was promptly subcontracted to a gaming company with actual experience in game development. Art Data Interactive quickly learned that the port was much more expensive than they thought. It would cost a million dollars and a year of development to which they agreed.\\
\par
By July 1995, relations with the subcontractor had deteriorated beyond repair\footnote{Source: "The unfortunate tale of 3DO DOOM" by Matt Gander.}. With a long-promised release date of October 1995 looming over their heads, Art Data Interactive reached out to a contractor that had previously done amazing work on porting Wolfenstein 3D to the 3DO. The name of the poor soul who accepted the project was Rebecca Ann Heineman from Logicware.\\
\par
Having committed to the project, Rebecca asked ADI for the source code she assumed they had received upon signing the contract with id Software. Nothing came. Eventually, she received a floppy disk. It turned out to just contain the commercial version of \doom~with the compiled binary \cw{DOOM.EXE} and \cw{DOOM.WAD}! Rebecca had to explain to ADI what source code was and how she could not start working from the binary. After a few weeks of struggling, she finally emailed John Carmack, who sent her the source code for the Jaguar version.\\
\par
 With ten weeks before going gold, Rebecca worked heroically and managed to reach the deadline. The final product however had sustained extensive damage\footnote{Burgertime 7/12/2015: DOOM 3DO.}.\\
\par
\cfullimage{doom_3do.png}{Doom on 3DO}
\par
The CEL engine was leveraged to render walls (one pixel wide columns like the PSX) but a bug had forced Rebecca to render flats in software. She had no time to write an audio driver for music playback so she recorded the PC version and sent them to the CEO of ADI who also happened to be a guitarist. A band was hired to re-record the music. Their covers were played directly from the CD.\\ 
\par
 Performance was terrible. Upon seeing the result, id Software demanded the active window size be reduced from fullscreen to 1/3 of the screen. Even with that adjustment, the frame rate was still an abysmal single digit most of the time.\\
\par
ADI ordered 50,000 copies from 3DO at a price of \$150,000 in licensing and manufacturing fees. The only hope for the company to recover its expenses was to sell every single copy. With an estimated base of 250,000 users, and with AAA titles selling between 10,000 to 20,000 copies, that was a huge gamble. Unfortunately yet quite logically, players hated it, the gaming press destroyed it, and ADI declared bankruptcy soon after. \\
\par
\fq{Although it's still Doom, it's a real duffer of a conversion.}{Ed Lomas for CVG  - Rated 60\%}\\
\par
% BELOW IS A PLACEHOLDER, MAKE A DRWAWING OF ARCH INSTEAD.\\
% \fullimage{doom_3do.png}
\vspace{20pt}
\rawdrawing{3do}

% \par
% Lots of good stuff here: https://github.com/Olde-Skuul/doom3do
% \par
%  CornerEngine - RISC processor, capable of vertex calculation and transformation, and 4*4 matrix math : multiplication by another 4*4 matrix, multiplication by vector, dot product, rotation.

Examining the 3DO hardware diagram on the previous page only makes us regret more that Rebecca didn't have more time on her hands to complete the project.\\
\par

\fq{I was misled about the state of the port when I was offered the project. I was told that there was a version in existence with new levels, weapons and features and it only needed "polishing" and optimization to hit the market. After numerous requests for this version, I found out that there was no such thing and that Art Data Interactive was under the false impression that all anyone needed to do to port a game from one platform to another was just to compile the code and adding weapons was as simple as dropping in the art.\\
% \par
% Uh... No...\\
\par
My friends at 3DO were begging for DOOM to be on their platform and with Christmas 1995 coming soon (I took this job in August of 1995, with a mid October golden master date), I literally lived in my office, only taking breaks to take a nap and got this port completed.\\
% \par
% Shortcuts made...\\
\par
I had no time to port the music driver, so I had a band that Art Data hired to redo the music so all I needed to do is call a streaming audio function to play the music. This turned out to be an excellent call because while the graphics were lackluster, the music got rave reviews.\\
\par
3DO's operating system was designed around running an app and purging, there was numerous bugs caused by memory leaks. So when I wanted to load the Logicware and id software logos on startup, the 3DO leaked the memory so to solve that, I created two apps, one to draw the 3do logo and the other to show the Logicware logo. After they executed, they were purged from memory and the main game could run without loss of memory.\\
\par
There was a Electronic Arts logo movie in the data, because there was a time that EA was going to be distributing the game, however the deal fell through.\\
\par
The vertical walls were drawn with strips using the cell engine. However, the cell engine can't handle 3D perspective so the floors and ceilings were drawn with software rendering. I simply ran out of time to translate the code to use the cell engine because the implementation I had caused texture tearing.\\
\par
I had to write my own string.h ANSI C library because the one 3DO supplied with their compiler had bugs! string.h??? How can you screw that up!?!?! They did! I spent a day writing all of the functions I needed in ARM 6 assembly.}{Rebecca Ann Heineman}



